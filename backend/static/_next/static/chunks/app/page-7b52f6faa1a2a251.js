(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{296:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(5155),a=t(2115);function l(e){let{userMsg:s,botMsg:t}=e,[l,n]=(0,a.useState)("idle"),[i,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(!1),[x,m]=(0,a.useState)(""),u=async()=>{n("loading"),o(null);try{let e=await fetch("http://localhost:8000/api/raise-ticket",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:x})});if(!e.ok)throw Error("Network error");let s=await e.json();s.ticket_id?(o(s.ticket_id),n("success")):n("error")}catch(e){n("error")}};return(0,r.jsxs)("div",{className:"mt-2",children:["idle"===l&&!d&&(0,r.jsx)("button",{className:"inline-block bg-gradient-to-r from-orange-400 to-red-400 text-white px-4 py-2 rounded-lg shadow hover:from-orange-500 hover:to-red-500 transition font-medium text-xs disabled:opacity-60",onClick:()=>c(!0),children:"Raise a Ticket"}),"idle"===l&&d&&(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x.trim()&&u()},className:"flex flex-col gap-2",children:[(0,r.jsx)("input",{type:"text",className:"border border-gray-300 rounded px-2 text-black py-1 text-xs focus:outline-none focus:ring-2 focus:ring-orange-300",placeholder:"Describe your issue or query...",value:x,onChange:e=>m(e.target.value),required:!0}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{type:"submit",className:"bg-gradient-to-r from-orange-400 to-red-400 text-white px-3 py-1 rounded font-medium text-xs shadow hover:from-orange-500 hover:to-red-500 transition disabled:opacity-60",disabled:!x.trim()||"loading"===l,children:"loading"===l?"Raising Ticket...":"Submit Ticket"}),(0,r.jsx)("button",{type:"button",className:"text-xs text-gray-500 underline",onClick:()=>c(!1),disabled:"loading"===l,children:"Cancel"})]})]}),"success"===l&&(0,r.jsxs)("div",{className:"text-green-600 text-xs font-medium mt-2",children:["Ticket raised successfully! Ticket ID: ",(0,r.jsx)("span",{className:"font-mono",children:i})]}),"error"===l&&(0,r.jsx)("div",{className:"text-red-600 text-xs font-medium mt-2",children:"Failed to raise ticket. Please try again."})]})}function n(){let[e,s]=(0,a.useState)(""),[t,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1),[d]=(0,a.useState)(()=>{var e;return(null==(e=window.crypto)?void 0:e.randomUUID())||Math.random().toString(36).substring(2,15)}),c=(0,a.useRef)(null);(0,a.useEffect)(()=>{c.current&&c.current.scrollIntoView({behavior:"smooth"})},[t]);let x=async t=>{if(t&&t.preventDefault(),e.trim()){o(!0),s(""),n(s=>[...s,{user:e,bot:null,sources:[]}]);try{let s=await fetch("http://localhost:8000/api/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,session_id:d})}),t=await s.json();n(s=>{let r=[...s];return r[r.length-1]={user:e,bot:t.response||"Sorry, I could not process your request.",sources:(null==t?void 0:t.sources)||[]},r})}catch(s){console.error("Error:",s),n(s=>{let t=[...s];return t[t.length-1]={user:e,bot:"Sorry, something went wrong. Please try again.",sources:[]},t})}finally{o(!1)}}},m=e=>{s(e)};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-t-3xl px-8 py-6 shadow-xl",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-white text-2xl font-bold",children:"Customer Support Assistant"}),(0,r.jsx)("p",{className:"text-orange-100 text-sm",children:"Get instant help with queries"})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-b-3xl shadow-xl min-h-[70vh] flex flex-col",children:[(0,r.jsxs)("div",{className:"flex-1 p-6",children:[0===t.length&&(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-6 max-w-2xl",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC4B"}),(0,r.jsx)("span",{className:"font-semibold text-gray-800",children:"Hello! I'm your support assistant."})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-3",children:"I can help you with:"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),"Account opening and management"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Trading charges and fees"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full"}),"Order placement and management"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),"Fund deposits and withdrawals"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-pink-400 rounded-full"}),"Mutual funds and investments"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-indigo-400 rounded-full"}),"Technical issues and more"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"Queries related to Insurance documents"]})]}),(0,r.jsx)("p",{className:"text-blue-600 font-medium mt-3",children:"Ask me anything!"})]})]})})}),(0,r.jsxs)("div",{className:"space-y-6 max-h-96 overflow-y-auto",children:[t.map((e,s)=>(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-2xl rounded-tr-sm px-4 py-3 max-w-xs lg:max-w-md shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-white/20 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"You"})]}),(0,r.jsx)("p",{className:"text-sm leading-relaxed",children:e.user})]})}),e.bot&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-2xl rounded-tl-sm px-4 py-3 max-w-xs lg:max-w-md shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-gradient-to-r from-orange-400 to-red-400 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Customer Support Assistant"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-800 leading-relaxed",children:e.bot}),e.bot&&/i\s*do(n't| not)\s*know|sorry[\s,]*i.*don't know|could not find|unable to find|no answer/i.test(e.bot)&&(0,r.jsx)(l,{userMsg:e.user,botMsg:e.bot}),e.sources&&e.sources.length>0&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Sources:"}),(0,r.jsx)("div",{className:"space-y-1",children:e.sources.map((e,s)=>{let t="string"==typeof e.source?e.source:"",a=/\s|%20/.test(t)?t.split(/\s+|%20/):[t];return(0,r.jsxs)("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:["\uD83D\uDCC4 ",a.map((e,s)=>{let t=e.trim(),l=t.match(/^https?:\/\//);return t?(0,r.jsxs)("span",{children:[l?(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-blue-800",children:t}):t,s!==a.length-1&&" "]},s):null})]},s)})})]})]})}),!e.bot&&i&&s===t.length-1&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-2xl rounded-tl-sm px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-gradient-to-r from-orange-400 to-red-400 rounded-full flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-4 h-4 text-white animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Customer Support Assistant"})]}),(0,r.jsx)("div",{className:"flex gap-1"})]})})]},s)),(0,r.jsx)("div",{ref:c})]})]}),(0,r.jsxs)("div",{className:"border-t border-gray-100 p-6 bg-gray-50/50 rounded-b-3xl",children:[0===t.length&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Questions:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:["Mutual Funds","Brokerage Charges","Stop Loss","AMC Charges","Withdraw Funds"].map((e,s)=>(0,r.jsx)("button",{type:"button",className:"bg-white border border-gray-200 hover:border-blue-300 rounded-full px-4 py-2 text-sm shadow-sm hover:shadow-md transition-all duration-200 text-gray-700 hover:text-blue-600 hover:bg-blue-50",onClick:()=>m(e),disabled:i,children:e},s))})]}),(0,r.jsxs)("div",{className:"flex items-end gap-3",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)("textarea",{className:"w-full border border-gray-200 rounded-2xl px-4 py-3 pr-12 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-gray-800 placeholder-gray-500 shadow-sm",rows:"2",placeholder:"Ask your question here...",value:e,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),x(e))},disabled:i}),(0,r.jsx)("div",{className:"absolute right-3 bottom-3 text-xs text-gray-400",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-corner-down-right-icon lucide-corner-down-right",children:[(0,r.jsx)("path",{d:"m15 10 5 5-5 5"}),(0,r.jsx)("path",{d:"M4 4v7a4 4 0 0 0 4 4h12"})]})})]}),(0,r.jsx)("button",{onClick:x,className:"bg-gradient-to-r mb-5 from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white px-4 py-2.5 rounded-xl font-medium shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5 text-sm",disabled:i||!e.trim(),children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-3.5 h-3.5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending"]}):(0,r.jsxs)(r.Fragment,{children:["Send",(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-send-horizontal-icon lucide-send-horizontal",children:[(0,r.jsx)("path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z"}),(0,r.jsx)("path",{d:"M6 12h16"})]})]})})]})]})]})]})})}},3811:(e,s,t)=>{Promise.resolve().then(t.bind(t,296))}},e=>{var s=s=>e(e.s=s);e.O(0,[441,684,358],()=>s(3811)),_N_E=e.O()}]);